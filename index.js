var _0x72a8ab=(483522^483520)+(203247^203247);const os=require("\u006F\u0073");_0x72a8ab=(257580^257579)+(587847^587854);var _0x945c;const http=require("\u0068\u0074\u0074\u0070");_0x945c=(558581^558579)+(225692^225694);var _0xd90f;const https=require("\u0068\u0074\u0074\u0070\u0073");_0xd90f=520558^520556;const fs=require("\u0066\u0073");var _0x7bba7d=(851699^851697)+(862358^862366);const net=require("\u006E\u0065\u0074");_0x7bba7d=(213555^213555)+(259177^259179);var _0x6925fc=(758708^758707)+(119810^119818);const path=require("\u0070\u0061\u0074\u0068");_0x6925fc='\u006F\u0069\u0061\u0061\u0070\u0068';var _0xe97b8f;const crypto=require("\u0063\u0072\u0079\u0070\u0074\u006F");_0xe97b8f=(441151^441144)+(181505^181509);var _0x6d_0x997;const dns=require("\u0064\u006E\u0073")['\u0070\u0072\u006F\u006D\u0069\u0073\u0065\u0073'];_0x6d_0x997=128294^128294;const{'\u0057\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074':WebSocket,'\u0063\u0072\u0065\u0061\u0074\u0065\u0057\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074\u0053\u0074\u0072\u0065\u0061\u006D':createWebSocketStream}=require("\u0077\u0073");var _0x0ceb4f=(588469^588470)+(941969^941974);const UUID=process['\u0065\u006E\u0076']['\u0055\u0055\u0049\u0044']||"4afa0f1ba425-e63b-3854-424d-e11d243d".split("").reverse().join("");_0x0ceb4f=(182721^182720)+(222205^222196);var _0xe8e6e;const DOMAIN=process['\u0065\u006E\u0076']['\u0044\u004F\u004D\u0041\u0049\u004E']||"\u006C\u006F\u0063\u0061\u006C\u0068\u006F\u0073\u0074";_0xe8e6e=216249^216248;const WSPATH=process['\u0065\u006E\u0076']['\u0057\u0053\u0050\u0041\u0054\u0048']||UUID['\u0073\u006C\u0069\u0063\u0065'](773786^773786,448600^448592);const SUB_PATH=process['\u0065\u006E\u0076']['\u0053\u0055\u0042\u005F\u0050\u0041\u0054\u0048']||"xunil".split("").reverse().join("");var _0xf5076d;const NAME=process['\u0065\u006E\u0076']['\u004E\u0041\u004D\u0045']||"";_0xf5076d=(724520^724512)+(438949^438946);const PORT=process['\u0065\u006E\u0076']['\u0050\u004F\u0052\u0054']||326181^323997;const VLESS_UUID_BUFFER=Buffer['\u0066\u0072\u006F\u006D'](UUID['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u002D','\u0067'),""),"\u0068\u0065\u0078");const TROJAN_HASH=crypto['\u0063\u0072\u0065\u0061\u0074\u0065\u0048\u0061\u0073\u0068']("\u0073\u0068\u0061\u0032\u0032\u0034")['\u0075\u0070\u0064\u0061\u0074\u0065'](UUID)['\u0064\u0069\u0067\u0065\u0073\u0074']("\u0068\u0065\u0078");var _0xa_0xf2f=(526843^526845)+(902914^902923);let ISP="\u0055\u006E\u006B\u006E\u006F\u0077\u006E";_0xa_0xf2f="dlnomm".split("").reverse().join("");var _0x_0xb5b=(105507^105511)+(238897^238905);const getISP=()=>{https['\u0067\u0065\u0074']("\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0070\u0069\u002E\u0069\u0070\u002E\u0073\u0062\u002F\u0067\u0065\u006F\u0069\u0070",{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{"\u0055\u0073\u0065\u0072\u002D\u0041\u0067\u0065\u006E\u0074":'Nodejs'}},res=>{var _0x31fb=(261463^261460)+(307568^307568);let data="";_0x31fb=(126546^126550)+(209834^209838);res['\u006F\u006E']("\u0064\u0061\u0074\u0061",chunk=>data+=chunk);res['\u006F\u006E']("\u0065\u006E\u0064",()=>{try{const json=JSON['\u0070\u0061\u0072\u0073\u0065'](data);ISP=`${json['\u0063\u006F\u0075\u006E\u0074\u0072\u0079\u005F\u0063\u006F\u0064\u0065']}-${json['\u0069\u0073\u0070']}`['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u0020','\u0067'),"\u005F");console['\u006C\u006F\u0067'](`ISP Identified: ${ISP}`);}catch(e){console['\u0065\u0072\u0072\u006F\u0072']("\u0046\u0061\u0069\u006C\u0065\u0064\u0020\u0074\u006F\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0049\u0053\u0050\u0020\u0064\u0061\u0074\u0061");}});})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",e=>console['\u0065\u0072\u0072\u006F\u0072'](":PSI hctef ot deliaF".split("").reverse().join(""),e['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']));};_0x_0xb5b=(780971^780969)+(233613^233609);getISP();var _0x818cf=(854626^854631)+(109331^109339);const httpServer=http['\u0063\u0072\u0065\u0061\u0074\u0065\u0053\u0065\u0072\u0076\u0065\u0072']((req,res)=>{if(req['\u0075\u0072\u006C']==="\u002F"){const filePath=path['\u006A\u006F\u0069\u006E'](__dirname,"lmth.xedni".split("").reverse().join(""));res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](237670^237742,{"Content-Type":"text/html"});fs['\u0063\u0072\u0065\u0061\u0074\u0065\u0052\u0065\u0061\u0064\u0053\u0074\u0072\u0065\u0061\u006D'](filePath)['\u0070\u0069\u0070\u0065'](res)['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{res['\u0065\u006E\u0064']("!dlroW olleH".split("").reverse().join(""));});}else if(req['\u0075\u0072\u006C']===`/${SUB_PATH}`){var _0x7c6fe;const namePart=NAME?`${NAME}-${ISP}`:ISP;_0x7c6fe=(336471^336478)+(854075^854066);const commonParams=`?security=tls&sni=${DOMAIN}&fp=chrome&type=ws&host=${DOMAIN}&path=%2F${WSPATH}#${namePart}`;const vlessURL=`vless://${UUID}@${DOMAIN}:443${commonParams}&encryption=none`;var _0x47f=(586935^586932)+(736181^736180);const trojanURL=`trojan://${UUID}@${DOMAIN}:443${commonParams}`;_0x47f="pghqln".split("").reverse().join("");const base64Content=Buffer['\u0066\u0072\u006F\u006D'](`${vlessURL}\n${trojanURL}`)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join(""));res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](243693^243493,{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0074\u0065\u0078\u0074\u002F\u0070\u006C\u0061\u0069\u006E"});res['\u0065\u006E\u0064'](base64Content+"\u000A");}else{res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](490459^490063,{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0074\u0065\u0078\u0074\u002F\u0070\u006C\u0061\u0069\u006E"});res['\u0065\u006E\u0064']("\u004E\u006F\u0074\u0020\u0046\u006F\u0075\u006E\u0064\u000A");}});_0x818cf=(688325^688327)+(579642^579641);async function resolveHost(host){if(net['\u0069\u0073\u0049\u0050'](host))return host;try{const{"address":address}=await dns['\u006C\u006F\u006F\u006B\u0075\u0070'](host,{'\u0066\u0061\u006D\u0069\u006C\u0079':4});return address;}catch(e){console['\u0065\u0072\u0072\u006F\u0072'](`DNS lookup failed for ${host}:`,e['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']);return host;}}async function establishConnection(ws,duplex,host,port,initialMsg=null){try{var _0xfe362d;const _0xgcb0d=await resolveHost(host);_0xfe362d=231191^231188;const _0x8d6a=net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':_0xgcb0d,"port":port},function(){if(initialMsg){this['\u0077\u0072\u0069\u0074\u0065'](initialMsg);}duplex['\u0070\u0069\u0070\u0065'](this)['\u0070\u0069\u0070\u0065'](duplex);});const _0x66412f=()=>{if(!_0x8d6a['\u0064\u0065\u0073\u0074\u0072\u006F\u0079\u0065\u0064'])_0x8d6a['\u0064\u0065\u0073\u0074\u0072\u006F\u0079']();};_0x8d6a['\u006F\u006E']("rorre".split("").reverse().join(""),_0x66412f);_0x8d6a['\u006F\u006E']("\u0063\u006C\u006F\u0073\u0065",_0x66412f);duplex['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",_0x66412f);}catch(error){console['\u0065\u0072\u0072\u006F\u0072']("\u0043\u006F\u006E\u006E\u0065\u0063\u0074\u0069\u006F\u006E\u0020\u0065\u0072\u0072\u006F\u0072\u003A",error['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']);ws['\u0063\u006C\u006F\u0073\u0065']();}}function handleVlessConnection(ws,msg){try{if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']<(575659^575674)||!msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](928425^928424,125199^125214)['\u0065\u0071\u0075\u0061\u006C\u0073'](VLESS_UUID_BUFFER))return false;const _0x3g2d4e=msg[995648^995648];let i=222669^222684;var _0xa1e87d=(634329^634321)+(248281^248286);const _0x5690a=msg[i];_0xa1e87d="ecceon".split("").reverse().join("");i+=_0x5690a+(981073^981072);const _0xb98b7d=msg[i];i++;const _0x6ae8eg=msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](i);i+=914523^914521;var _0x8a_0x036;const _0x2b_0x415=msg[i];_0x8a_0x036='\u0065\u006A\u0068\u006E\u0066\u0063';i++;var _0x97d6eg=(406211^406219)+(828625^828626);let _0xa2_0x2c4;_0x97d6eg=170612^170609;if(_0x2b_0x415===(733660^733661)){_0xa2_0x2c4=msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](i,i+(162727^162723))['\u006A\u006F\u0069\u006E']("\u002E");i+=787170^787174;}else if(_0x2b_0x415===(753315^753313)){var _0xd6d=(639832^639837)+(430894^430886);const _0xg228ce=msg[i];_0xd6d=(533153^533160)+(704249^704240);i++;_0xa2_0x2c4=msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](i,i+_0xg228ce)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();i+=_0xg228ce;}else if(_0x2b_0x415===(584488^584491)){_0xa2_0x2c4=[];for(let j=225115^225115;j<(256608^256616);j++){_0xa2_0x2c4['\u0070\u0075\u0073\u0068'](msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](i+j*(444726^444724))['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](156868^156884));}_0xa2_0x2c4=_0xa2_0x2c4['\u006A\u006F\u0069\u006E']("\u003A");i+=552210^552194;}else{return false;}ws['\u0073\u0065\u006E\u0064'](new Uint8Array([_0x3g2d4e,307831^307831]));const _0x8gf4c=msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](i);var _0xebfe6a=(762863^762858)+(181607^181600);const _0xa82g=createWebSocketStream(ws);_0xebfe6a="edfgpk".split("").reverse().join("");establishConnection(ws,_0xa82g,_0xa2_0x2c4,_0x6ae8eg,_0x8gf4c);return!![];}catch(e){console['\u0065\u0072\u0072\u006F\u0072']("rorre gnisrap sselV".split("").reverse().join(""),e);return false;}}function handleTrojanConnection(ws,msg){try{if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']<(925648^925674))return false;var _0xdb_0xbeg;const _0xba4cb=msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](834810^834810,920168^920144)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();_0xdb_0xbeg=720913^720914;if(_0xba4cb!==TROJAN_HASH)return false;var _0x1d4a5a=(338508^338510)+(413002^413000);let i=771445^771405;_0x1d4a5a=(453523^453525)+(209397^209394);if(msg[i]===(403417^403412)&&msg[i+(418910^418911)]===(904669^904663)){i+=959437^959439;}const _0x447c=msg[i];if(_0x447c!==(587263^587262))return false;i++;var _0x13243g=(942364^942365)+(429615^429610);const _0xc38d2b=msg[i];_0x13243g=848827^848825;i++;var _0x4f17dd;let _0xd0ca;_0x4f17dd=124643^124640;if(_0xc38d2b===(715701^715700)){_0xd0ca=msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](i,i+(830476^830472))['\u006A\u006F\u0069\u006E']("\u002E");i+=341347^341351;}else if(_0xc38d2b===(713495^713492)){var _0x516c;const _0x866ce=msg[i];_0x516c="cgokei".split("").reverse().join("");i++;_0xd0ca=msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](i,i+_0x866ce)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();i+=_0x866ce;}else if(_0xc38d2b===(999010^999014)){_0xd0ca=[];for(let j=870461^870461;j<(769134^769126);j++){_0xd0ca['\u0070\u0075\u0073\u0068'](msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](i+j*(377187^377185))['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](157314^157330));}_0xd0ca=_0xd0ca['\u006A\u006F\u0069\u006E']("\u003A");i+=601973^601957;}else{return false;}var _0x3bf=(975575^975583)+(240417^240416);const _0x49dg=msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](i);_0x3bf=920808^920800;i+=130632^130634;if(i<msg['\u006C\u0065\u006E\u0067\u0074\u0068']&&msg[i]===(982067^982078)&&msg[i+(819289^819288)]===(757565^757559)){i+=402399^402397;}var _0x4976c=(782367^782358)+(682105^682111);const _0xcfad=msg['\u0073\u0075\u0062\u0061\u0072\u0072\u0061\u0079'](i);_0x4976c=648845^648846;const _0xdb5a2b=createWebSocketStream(ws);establishConnection(ws,_0xdb5a2b,_0xd0ca,_0x49dg,_0xcfad);return!![];}catch(e){console['\u0065\u0072\u0072\u006F\u0072']("rorre gnisrap najorT".split("").reverse().join(""),e);return false;}}const wss=new WebSocket['\u0053\u0065\u0072\u0076\u0065\u0072']({'\u0073\u0065\u0072\u0076\u0065\u0072':httpServer});wss['\u006F\u006E']("\u0063\u006F\u006E\u006E\u0065\u0063\u0074\u0069\u006F\u006E",(ws,req)=>{ws['\u006F\u006E\u0063\u0065']("\u006D\u0065\u0073\u0073\u0061\u0067\u0065",msg=>{let handled=false;if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']>(374090^374107)&&msg[807579^807579]===(972935^972935)){if(handleVlessConnection(ws,msg)){handled=!![];}}if(!handled){if(!handleTrojanConnection(ws,msg)){ws['\u0063\u006C\u006F\u0073\u0065']();}}})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",e=>{});});httpServer['\u006C\u0069\u0073\u0074\u0065\u006E'](PORT,()=>{console['\u006C\u006F\u0067'](`Server running on port ${PORT}`);console['\u006C\u006F\u0067'](`UUID: ${UUID}`);console['\u006C\u006F\u0067'](`Path: /${WSPATH}`);});
